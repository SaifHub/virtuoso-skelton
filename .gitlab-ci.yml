# @author: ABDUL SAIF
# @date  : 29/11/2016

image: saifabs/chocolate

before_script:
  - . /xvfb.sh

stages:
  - test

test:
  script:
  - wget http://selenium-release.storage.googleapis.com/3.0/selenium-server-standalone-3.0.1.jar -q
  - java -jar selenium-server-standalone-3.0.1.jar -role hub &
  - sleep 10
  - java -jar selenium-server-standalone-3.0.1.jar -role node -hub http://localhost:4444/grid/register/ &
  - mvn clean verify -q

  artifacts:
    name: "${CI_BUILD_NAME}_${CI_BUILD_REF_NAME}"
    paths:
    - target/site/jacoco/*
    - target/site/serenity/*
    expire_in: 1 week
